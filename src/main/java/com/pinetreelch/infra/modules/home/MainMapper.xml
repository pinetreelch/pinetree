<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pinetreelch.infra.modules.home.MainMapper">

    <resultMap id="resultMapObj" type="com.pinetreelch.infra.modules.home.Main"></resultMap>
	
	<sql id ="selectCommon">
		FROM
	</sql>
	
	
	<select id="selectList" resultMap="resultMapObj">
		select
			a.tdbkSeq
			,a.tdbkBookTitle
		    ,b.url
		    ,a.tdbkSubtitle
		    ,a.registeredDate
		from tradBook a
		left join bkUploaded b on pSeq = tdbkSeq 
		where 
			1=1
		order by registeredDate DESC
	
	</select>
	
	<select id="selectBook" resultMap="resultMapObj">
	
		select
			a.tdbkSeq
		    ,a.tdbkBookTitle
		    ,b.url
		    ,a.visitors
		from
			tradBook a
		left join bkUploaded b on a.tdbkSeq = b.pSeq
		where 
			1=1
		order by a.visitors DESC
    	
	</select>
	
	<select id="selectRandom" resultMap="resultMapObj">
		select
			a.tdbkSeq
		    ,a.tdbkBookTitle
		    ,b.url
		    ,b.urllarge
		from
			tradBook a
		left join bkUploaded b on a.tdbkSeq = b.pSeq
		where 
			1=1
		order by RAND();
	</select>
	
	<select id="selectRandomTwo" resultMap="resultMapObj">
		select
			a.tdbkSeq
		    ,a.tdbkBookTitle
		    ,b.url
		    ,b.urllarge
		from
			tradBook a
		left join bkUploaded b on a.tdbkSeq = b.pSeq
		where 
			1=1
		order by RAND();
	</select>
	
	<select id="selectList1" resultMap="resultMapObj">
		select
			a.tdbkSeq
		    ,a.tdbkBookTitle
		    , c.tdauName
		    , b.tradAuthor_tdatSeq
		    , b.tradBook_tdbkSeq
		from
			tradBook a
		left join tradBookAuthor b on tradBook_tdbkSeq = tdbkSeq
		left join tradAuthor c on tradAuthor_tdatSeq =tdauSeq
		where 
			1=1
		order by a.visitors DESC

	
	</select>
	
	
	<!-- selectOne -->
	<select id = "selectOne" resultMap = "resultMapObj">
	SELECT 
	    a.tdbkSeq
	    ,b.urllarge
	    ,a.tdbkBookTitle
	    ,a.tdbkSubtitle
	    ,a.tdPaperprice
	    ,a.tdbkDiscountprice
	    ,a.tdbkSales
	    ,a.tdbkIntro
	    ,a.tdbkIntro2
	    ,a.tdbkPusblisherOpinion
	    ,a.tdbkPusblisherOpinion2
	    ,a.tdbkToc
	    ,a.tdbkToc2
	    ,a.tdbkPublisher
	    ,a.tdbkDop
	    ,a.tdbkDopType
	    ,a.tdbkDopPaper
	    ,a.tdbkDopPtype
	    ,a.tdbkGenre
	    ,a.tdbkListenFunction
	    ,a.tdbkFileinfo
	    ,a.tdbkSupportDevice
	    ,a.tdbkIsbn
	FROM tradBook a
	LEFT JOIN bkUploaded b ON a.tdbkSeq = b.pSeq
	where 1=1
		AND tdbkSeq = #{tdbkSeq}
	</select>
	
	<insert id = "insert"> 
	
	</insert>

</mapper>